!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Drawflow=e():t.Drawflow=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";var o=SyntaxError,r=Function,i=TypeError,s=function(t){try{return r('"use strict"; return ('+t+").constructor;")()}catch(t){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(t){a=null}var l=function(){throw new i},c=a?function(){try{return l}catch(t){try{return a(arguments,"callee").get}catch(t){return l}}}():l,u=n(12)(),d=Object.getPrototypeOf||function(t){return t.__proto__},p={},h="undefined"==typeof Uint8Array?void 0:d(Uint8Array),f={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":u?d([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?d(d([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?d((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?d((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?d(""[Symbol.iterator]()):void 0,"%Symbol%":u?Symbol:void 0,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":h,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=n(1),g=n(15),v=m.call(Function.call,Array.prototype.concat),_=m.call(Function.apply,Array.prototype.splice),w=m.call(Function.call,String.prototype.replace),b=m.call(Function.call,String.prototype.slice),S=m.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,C=function(t){var e=b(t,0,1),n=b(t,-1);if("%"===e&&"%"!==n)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new o("invalid intrinsic syntax, expected opening `%`");var r=[];return w(t,E,(function(t,e,n,o){r[r.length]=n?w(o,x,"$1"):e||t})),r},A=function(t,e){var n,r=t;if(g(y,r)&&(r="%"+(n=y[r])[0]+"%"),g(f,r)){var a=f[r];if(a===p&&(a=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var o=t("%AsyncGeneratorFunction%");o&&(n=o.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(n=d(r.prototype))}return f[e]=n,n}(r)),void 0===a&&!e)throw new i("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new o("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new i('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/g,t))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=C(t),r=n.length>0?n[0]:"",s=A("%"+r+"%",e),l=s.name,c=s.value,u=!1,d=s.alias;d&&(r=d[0],_(n,v([0,1],d)));for(var p=1,h=!0;p<n.length;p+=1){var y=n[p],m=b(y,0,1),w=b(y,-1);if(('"'===m||"'"===m||"`"===m||'"'===w||"'"===w||"`"===w)&&m!==w)throw new o("property names with quotes must have matching quotes");if("constructor"!==y&&h||(u=!0),g(f,l="%"+(r+="."+y)+"%"))c=f[l];else if(null!=c){if(!(y in c)){if(!e)throw new i("base intrinsic for "+t+" exists, but the property is not available.");return}if(a&&p+1>=n.length){var E=a(c,y);c=(h=!!E)&&"get"in E&&!("originalValue"in E.get)?E.get:c[y]}else h=g(c,y),c=c[y];h&&!u&&(f[l]=c)}}return c}},function(t,e,n){"use strict";var o=n(14);t.exports=Function.prototype.bind||o},function(t,e,n){"use strict";var o=String.prototype.replace,r=/%20/g,i="RFC1738",s="RFC3986";t.exports={default:s,formatters:{RFC1738:function(t){return o.call(t,r,"+")},RFC3986:function(t){return String(t)}},RFC1738:i,RFC3986:s}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){var e,n={},o=r(t.split(/ *; */));try{for(o.s();!(e=o.n()).done;){var i=e.value.split(/ *= */),s=i.shift(),a=i.shift();s&&a&&(n[s]=a)}}catch(t){o.e(t)}finally{o.f()}return n},e.parseLinks=function(t){var e,n={},o=r(t.split(/ *, */));try{for(o.s();!(e=o.n()).done;){var i=e.value.split(/ *; */),s=i[0].slice(1,-1);n[i[1].split(/ *= */)[1].slice(1,-1)]=s}}catch(t){o.e(t)}finally{o.f()}return n},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t},e.isObject=function(t){return null!==t&&"object"===o(t)},e.hasOwn=Object.hasOwn||function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(new Object(t),e)},e.mixin=function(t,n){for(var o in n)e.hasOwn(n,o)&&(t[o]=n[o])}},function(t,e,n){"use strict";var o=n(2),r=Object.prototype.hasOwnProperty,i=Array.isArray,s=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},o=0;o<t.length;++o)void 0!==t[o]&&(n[o]=t[o]);return n};t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],o=0;o<e.length;++o)for(var r=e[o],s=r.obj[r.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],u=s[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(e.push({obj:s,prop:c}),n.push(u))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(i(n)){for(var o=[],r=0;r<n.length;++r)void 0!==n[r]&&o.push(n[r]);e.obj[e.prop]=o}}}(e),t},decode:function(t,e,n){var o=t.replace(/\+/g," ");if("iso-8859-1"===n)return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch(t){return o}},encode:function(t,e,n,r,i){if(0===t.length)return t;var a=t;if("symbol"==typeof t?a=Symbol.prototype.toString.call(t):"string"!=typeof t&&(a=String(t)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var l="",c=0;c<a.length;++c){var u=a.charCodeAt(c);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||i===o.RFC1738&&(40===u||41===u)?l+=a.charAt(c):u<128?l+=s[u]:u<2048?l+=s[192|u>>6]+s[128|63&u]:u<55296||u>=57344?l+=s[224|u>>12]+s[128|u>>6&63]+s[128|63&u]:(c+=1,u=65536+((1023&u)<<10|1023&a.charCodeAt(c)),l+=s[240|u>>18]+s[128|u>>12&63]+s[128|u>>6&63]+s[128|63&u])}return l},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(i(t)){for(var n=[],o=0;o<t.length;o+=1)n.push(e(t[o]));return n}return e(t)},merge:function t(e,n,o){if(!n)return e;if("object"!=typeof n){if(i(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(o&&(o.plainObjects||o.allowPrototypes)||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var s=e;return i(e)&&!i(n)&&(s=a(e,o)),i(e)&&i(n)?(n.forEach((function(n,i){if(r.call(e,i)){var s=e[i];s&&"object"==typeof s&&n&&"object"==typeof n?e[i]=t(s,n,o):e.push(n)}else e[i]=n})),e):Object.keys(n).reduce((function(e,i){var s=n[i];return r.call(e,i)?e[i]=t(e[i],s,o):e[i]=s,e}),s)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));const o=n(6);class r{constructor(t,e=null,n=null){this.events={},this.container=t,this.precanvas=null,this.nodeId=1,this.ele_selected=null,this.node_selected=null,this.drag=!1,this.reroute=!1,this.reroute_fix_curvature=!1,this.curvature=.5,this.reroute_curvature_start_end=.5,this.reroute_curvature=.5,this.reroute_width=6,this.drag_point=!1,this.editor_selected=!1,this.connection=!1,this.connection_ele=null,this.connection_selected=null,this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_x_start=0,this.pos_y=0,this.pos_y_start=0,this.mouse_x=0,this.mouse_y=0,this.line_path=5,this.first_click=null,this.force_first_input=!1,this.draggable_inputs=!0,this.useuuid=!1,this.parent=n,this.noderegister={},this.render=e,this.drawflow={drawflow:{Home:{data:{}}}},this.module="Home",this.editor_mode="edit",this.zoom=1,this.zoom_max=1.6,this.zoom_min=.5,this.zoom_value=.1,this.zoom_last_value=1,this.evCache=new Array,this.prevDiff=-1}start(){this.container.classList.add("parent-drawflow"),this.container.tabIndex=0,this.precanvas=document.createElement("div"),this.precanvas.classList.add("drawflow"),this.container.appendChild(this.precanvas),this.container.addEventListener("mouseup",this.dragEnd.bind(this)),this.container.addEventListener("mousemove",this.position.bind(this)),this.container.addEventListener("mousedown",this.click.bind(this)),this.container.addEventListener("touchend",this.dragEnd.bind(this)),this.container.addEventListener("touchmove",this.position.bind(this)),this.container.addEventListener("touchstart",this.click.bind(this)),this.container.addEventListener("contextmenu",this.contextmenu.bind(this)),this.container.addEventListener("keydown",this.key.bind(this)),this.container.addEventListener("wheel",this.zoom_enter.bind(this)),this.container.addEventListener("input",this.updateNodeValue.bind(this)),this.container.addEventListener("dblclick",this.dblclick.bind(this)),this.container.onpointerdown=this.pointerdown_handler.bind(this),this.container.onpointermove=this.pointermove_handler.bind(this),this.container.onpointerup=this.pointerup_handler.bind(this),this.container.onpointercancel=this.pointerup_handler.bind(this),this.container.onpointerout=this.pointerup_handler.bind(this),this.container.onpointerleave=this.pointerup_handler.bind(this),this.refresh(),this.load()}pointerdown_handler(t){this.evCache.push(t)}pointermove_handler(t){for(var e=0;e<this.evCache.length;e++)if(t.pointerId==this.evCache[e].pointerId){this.evCache[e]=t;break}if(2==this.evCache.length){var n=Math.abs(this.evCache[0].clientX-this.evCache[1].clientX);this.prevDiff>100&&(n>this.prevDiff&&this.zoom_in(),n<this.prevDiff&&this.zoom_out()),this.prevDiff=n}}pointerup_handler(t){this.remove_event(t),this.evCache.length<2&&(this.prevDiff=-1)}remove_event(t){for(var e=0;e<this.evCache.length;e++)if(this.evCache[e].pointerId==t.pointerId){this.evCache.splice(e,1);break}}load(){for(var t in this.drawflow.drawflow[this.module].data)this.addNodeImport(this.drawflow.drawflow[this.module].data[t],this.precanvas);if(this.reroute)for(var t in this.drawflow.drawflow[this.module].data)this.addRerouteImport(this.drawflow.drawflow[this.module].data[t]);for(var t in this.drawflow.drawflow[this.module].data)this.updateConnectionNodes("node-"+t);const e=this.drawflow.drawflow;let n=1;Object.keys(e).map((function(t,o){Object.keys(e[t].data).map((function(t,e){parseInt(t)>=n&&(n=parseInt(t)+1)}))})),this.nodeId=n}removeReouteConnectionSelected(){this.dispatch("connectionUnselected",!0),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((t,e)=>{t.classList.remove("selected")})}click(t){if(this.dispatch("click",t),"fixed"===this.editor_mode){if(t.preventDefault(),"parent-drawflow"!==t.target.classList[0]&&"drawflow"!==t.target.classList[0])return!1;this.ele_selected=t.target.closest(".parent-drawflow")}else"view"===this.editor_mode?(null!=t.target.closest(".drawflow")||t.target.matches(".parent-drawflow"))&&(this.ele_selected=t.target.closest(".parent-drawflow"),t.preventDefault()):(this.first_click=t.target,this.ele_selected=t.target,0===t.button&&this.contextmenuDel(),null!=t.target.closest(".drawflow_content_node")&&(this.ele_selected=t.target.closest(".drawflow_content_node").parentElement));switch(this.ele_selected.classList[0]){case"drawflow-node":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected!=this.ele_selected&&this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.node_selected!=this.ele_selected&&this.dispatch("nodeSelected",this.ele_selected.id.slice(5)),this.node_selected=this.ele_selected,this.node_selected.classList.add("selected"),this.draggable_inputs?"SELECT"!==t.target.tagName&&(this.drag=!0):"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"SELECT"!==t.target.tagName&&!0!==t.target.hasAttribute("contenteditable")&&(this.drag=!0);break;case"output":this.connection=!0,null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.drawConnection(t.target);break;case"parent-drawflow":case"drawflow":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.editor_selected=!0;break;case"main-path":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.connection_selected=this.ele_selected,this.connection_selected.classList.add("selected");const e=this.connection_selected.parentElement.classList;e.length>1&&(this.dispatch("connectionSelected",{output_id:e[2].slice(14),input_id:e[1].slice(13),output_class:e[3],input_class:e[4]}),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((t,e)=>{t.classList.add("selected")}));break;case"point":this.drag_point=!0,this.ele_selected.classList.add("selected");break;case"drawflow-delete":this.node_selected&&this.removeNodeId(this.node_selected.id),this.connection_selected&&this.removeConnection(),null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null)}"touchstart"===t.type?(this.pos_x=t.touches[0].clientX,this.pos_x_start=t.touches[0].clientX,this.pos_y=t.touches[0].clientY,this.pos_y_start=t.touches[0].clientY):(this.pos_x=t.clientX,this.pos_x_start=t.clientX,this.pos_y=t.clientY,this.pos_y_start=t.clientY),["input","output","main-path"].includes(this.ele_selected.classList[0])&&t.preventDefault(),this.dispatch("clickEnd",t)}position(t){if("touchmove"===t.type)var e=t.touches[0].clientX,n=t.touches[0].clientY;else e=t.clientX,n=t.clientY;if(this.connection&&this.updateConnection(e,n),this.editor_selected&&(o=this.canvas_x+-(this.pos_x-e),r=this.canvas_y+-(this.pos_y-n),this.requestOperation("translate",{x:o,y:r},(function(t,e){})),this.dispatch("translate",{x:o,y:r}),this.precanvas.style.transform="translate("+o+"px, "+r+"px) scale("+this.zoom+")"),this.drag){t.preventDefault();var o=(this.pos_x-e)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),r=(this.pos_y-n)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom);this.pos_x=e,this.pos_y=n,this.ele_selected.style.top=this.ele_selected.offsetTop-r+"px",this.ele_selected.style.left=this.ele_selected.offsetLeft-o+"px",this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_x=this.ele_selected.offsetLeft-o,this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_y=this.ele_selected.offsetTop-r,this.updateConnectionNodes(this.ele_selected.id)}if(this.drag_point){o=(this.pos_x-e)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),r=(this.pos_y-n)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom);this.pos_x=e,this.pos_y=n;var i=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),s=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));this.ele_selected.setAttributeNS(null,"cx",i),this.ele_selected.setAttributeNS(null,"cy",s);const t=this.ele_selected.parentElement.classList[2].slice(9),a=this.ele_selected.parentElement.classList[1].slice(13),l=this.ele_selected.parentElement.classList[3],c=this.ele_selected.parentElement.classList[4];let u=Array.from(this.ele_selected.parentElement.children).indexOf(this.ele_selected)-1;if(this.reroute_fix_curvature){u-=this.ele_selected.parentElement.querySelectorAll(".main-path").length-1,u<0&&(u=0)}const d=t.slice(5),p=this.drawflow.drawflow[this.module].data[d].outputs[l].connections.findIndex((function(t,e){return t.node===a&&t.output===c}));this.drawflow.drawflow[this.module].data[d].outputs[l].connections[p].points[u]={pos_x:i,pos_y:s};const h=this.ele_selected.parentElement.classList[2].slice(9);this.updateConnectionNodes(h)}"touchmove"===t.type&&(this.mouse_x=e,this.mouse_y=n),this.dispatch("mouseMove",{x:e,y:n})}dragEnd(t){if("touchend"===t.type)var e=this.mouse_x,n=this.mouse_y,o=document.elementFromPoint(e,n);else e=t.clientX,n=t.clientY,o=t.target;if(this.drag&&(this.pos_x_start==e&&this.pos_y_start==n||(this.requestOperation("nodeMoved",{id:this.ele_selected.id,pos_x:e,pos_y:n},(function(t,e){})),this.dispatch("nodeMoved",this.ele_selected.id.slice(5)))),this.drag_point&&(this.ele_selected.classList.remove("selected"),this.pos_x_start==e&&this.pos_y_start==n||this.dispatch("rerouteMoved",this.ele_selected.parentElement.classList[2].slice(14))),this.editor_selected&&(this.canvas_x=this.canvas_x+-(this.pos_x-e),this.canvas_y=this.canvas_y+-(this.pos_y-n),this.editor_selected=!1),!0===this.connection)if("input"===o.classList[0]||this.force_first_input&&(null!=o.closest(".drawflow_content_node")||"drawflow-node"===o.classList[0])){if(!this.force_first_input||null==o.closest(".drawflow_content_node")&&"drawflow-node"!==o.classList[0])r=o.parentElement.parentElement.id,i=o.classList[1];else{if(null!=o.closest(".drawflow_content_node"))var r=o.closest(".drawflow_content_node").parentElement.id;else var r=o.id;if(0===Object.keys(this.getNodeFromId(r.slice(5)).inputs).length)var i=!1;else var i="input_1"}var s=this.ele_selected.parentElement.parentElement.id,a=this.ele_selected.classList[1];if(s!==r&&!1!==i){if(0===this.container.querySelectorAll(".connection.node_in_"+r+".node_out_"+s+"."+a+"."+i).length){var l=r.slice(5),c=s.slice(5);this.addConnection(c,l,a,i),this.connection_ele.remove()}else this.dispatch("connectionCancel",!0),this.connection_ele.remove();this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null;this.drag=!1,this.drag_point=!1,this.connection=!1,this.ele_selected=null,this.editor_selected=!1,this.dispatch("mouseUp",t)}contextmenu(t){if(this.dispatch("contextmenu",t),t.preventDefault(),"fixed"===this.editor_mode||"view"===this.editor_mode)return!1;if(this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove(),this.node_selected||this.connection_selected){var e=document.createElement("div");e.classList.add("drawflow-delete"),e.innerHTML="x",this.node_selected&&this.node_selected.appendChild(e),this.connection_selected&&this.connection_selected.parentElement.classList.length>1&&(e.style.top=t.clientY*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))+"px",e.style.left=t.clientX*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))+"px",this.precanvas.appendChild(e))}}contextmenuDel(){this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove()}key(t){if(this.dispatch("keydown",t),"fixed"===this.editor_mode||"view"===this.editor_mode)return!1;("Delete"===t.key||"Backspace"===t.key&&t.metaKey)&&(null!=this.node_selected&&"INPUT"!==this.first_click.tagName&&"TEXTAREA"!==this.first_click.tagName&&!0!==this.first_click.hasAttribute("contenteditable")&&this.removeNodeId(this.node_selected.id),null!=this.connection_selected&&this.removeConnection())}zoom_enter(t,e){t.ctrlKey&&(t.preventDefault(),t.deltaY>0?this.zoom_out():this.zoom_in())}zoom_refresh(){this.requestOperation("zoom",{zoom:this.zoom},(function(t,e){})),this.dispatch("zoom",this.zoom),this.canvas_x=this.canvas_x/this.zoom_last_value*this.zoom,this.canvas_y=this.canvas_y/this.zoom_last_value*this.zoom,this.zoom_last_value=this.zoom,this.precanvas.style.transform="translate("+this.canvas_x+"px, "+this.canvas_y+"px) scale("+this.zoom+")"}zoom_in(){this.zoom<this.zoom_max&&(this.zoom+=this.zoom_value,this.zoom_refresh())}zoom_out(){this.zoom>this.zoom_min&&(this.zoom-=this.zoom_value,this.zoom_refresh())}zoom_reset(){1!=this.zoom&&(this.zoom=1,this.zoom_refresh())}createCurvature(t,e,n,o,r,i){var s=t,a=e,l=n,c=o,u=r;switch(i){case"open":if(t>=n)var d=s+Math.abs(l-s)*u,p=l-Math.abs(l-s)*(-1*u);else d=s+Math.abs(l-s)*u,p=l-Math.abs(l-s)*u;return" M "+s+" "+a+" C "+d+" "+a+" "+p+" "+c+" "+l+"  "+c;case"close":if(t>=n)d=s+Math.abs(l-s)*(-1*u),p=l-Math.abs(l-s)*u;else d=s+Math.abs(l-s)*u,p=l-Math.abs(l-s)*u;return" M "+s+" "+a+" C "+d+" "+a+" "+p+" "+c+" "+l+"  "+c;case"other":if(t>=n)d=s+Math.abs(l-s)*(-1*u),p=l-Math.abs(l-s)*(-1*u);else d=s+Math.abs(l-s)*u,p=l-Math.abs(l-s)*u;return" M "+s+" "+a+" C "+d+" "+a+" "+p+" "+c+" "+l+"  "+c;default:return" M "+s+" "+a+" C "+(d=s+Math.abs(l-s)*u)+" "+a+" "+(p=l-Math.abs(l-s)*u)+" "+c+" "+l+"  "+c}}drawConnection(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this.connection_ele=e;var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.classList.add("main-path"),n.setAttributeNS(null,"d",""),e.classList.add("connection"),e.appendChild(n),this.precanvas.appendChild(e);var o=t.parentElement.parentElement.id.slice(5),r=t.classList[1];this.dispatch("connectionStart",{output_id:o,output_class:r})}updateConnection(t,e){const n=this.precanvas,o=this.zoom;let r=n.clientWidth/(n.clientWidth*o);r=r||0;let i=n.clientHeight/(n.clientHeight*o);i=i||0;var s=this.connection_ele.children[0],a=this.ele_selected.offsetWidth/2+(this.ele_selected.getBoundingClientRect().x-n.getBoundingClientRect().x)*r,l=this.ele_selected.offsetHeight/2+(this.ele_selected.getBoundingClientRect().y-n.getBoundingClientRect().y)*i,c=t*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),u=e*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom)),d=this.curvature,p=this.createCurvature(a,l,c,u,d,"openclose");s.setAttributeNS(null,"d",p)}onSuccess_addConnection(t,e){var n=t.id_output,o=t.id_input,r=t.output_class,i=t.input_class,s=e.getModuleFromNodeId(n);if(s===e.getModuleFromNodeId(o)){var a=e.getNodeFromId(n),l=!1;for(var c in a.outputs[r].connections){var u=a.outputs[r].connections[c];u.node==o&&u.output==i&&(l=!0)}if(!1===l){if(e.drawflow.drawflow[s].data[n].outputs[r].connections.push({node:o.toString(),output:i}),e.drawflow.drawflow[s].data[o].inputs[i].connections.push({node:n.toString(),input:r}),e.module===s){var d=document.createElementNS("http://www.w3.org/2000/svg","svg"),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.classList.add("main-path"),p.setAttributeNS(null,"d",""),d.classList.add("connection"),d.classList.add("node_in_node-"+o),d.classList.add("node_out_node-"+n),d.classList.add(r),d.classList.add(i),d.appendChild(p),e.precanvas.appendChild(d),e.updateConnectionNodes("node-"+n),e.updateConnectionNodes("node-"+o)}e.dispatch("connectionCreated",{output_id:n,input_id:o,output_class:r,input_class:i})}}}addConnection(t,e,n,o){this.requestOperation("addConnection",{id_output:t,id_input:e,output_class:n,input_class:o})}updateConnectionNodes(t){const e="node_in_"+t,n="node_out_"+t;this.line_path;const o=this.container,r=this.precanvas,i=this.curvature,s=this.createCurvature,a=this.reroute_curvature,l=this.reroute_curvature_start_end,c=this.reroute_fix_curvature,u=this.reroute_width,d=this.zoom;let p=r.clientWidth/(r.clientWidth*d);p=p||0;let h=r.clientHeight/(r.clientHeight*d);h=h||0;const f=o.querySelectorAll("."+n);Object.keys(f).map((function(e,n){if(null===f[e].querySelector(".point")){var y=o.querySelector("#"+t),m=f[e].classList[1].replace("node_in_",""),g=o.querySelector("#"+m).querySelectorAll("."+f[e].classList[4])[0],v=g.offsetWidth/2+(g.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,_=g.offsetHeight/2+(g.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,w=y.querySelectorAll("."+f[e].classList[3])[0],b=w.offsetWidth/2+(w.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,S=w.offsetHeight/2+(w.getBoundingClientRect().y-r.getBoundingClientRect().y)*h;const n=s(b,S,v,_,i,"openclose");f[e].children[0].setAttributeNS(null,"d",n)}else{const n=f[e].querySelectorAll(".point");let i="";const y=[];n.forEach((e,c)=>{if(0===c&&n.length-1==0){var f=o.querySelector("#"+t),m=((S=e).getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,g=(S.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,v=(E=f.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(E.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,_=E.offsetHeight/2+(E.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,w=s(v,_,m,g,l,"open");i+=w,y.push(w);f=e;var b=e.parentElement.classList[1].replace("node_in_",""),S=(x=o.querySelector("#"+b)).querySelectorAll("."+e.parentElement.classList[4])[0];m=(C=x.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(C.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,g=C.offsetHeight/2+(C.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,v=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,_=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,w=s(v,_,m,g,l,"close");i+=w,y.push(w)}else if(0===c){var E;f=o.querySelector("#"+t),m=((S=e).getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,g=(S.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,v=(E=f.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(E.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,_=E.offsetHeight/2+(E.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,w=s(v,_,m,g,l,"open");i+=w,y.push(w);f=e,m=((S=n[c+1]).getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,g=(S.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,v=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,_=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,w=s(v,_,m,g,a,"other");i+=w,y.push(w)}else if(c===n.length-1){var x,C;f=e,b=e.parentElement.classList[1].replace("node_in_",""),S=(x=o.querySelector("#"+b)).querySelectorAll("."+e.parentElement.classList[4])[0],m=(C=x.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(C.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,g=C.offsetHeight/2+(C.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,v=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*(r.clientWidth/(r.clientWidth*d))+u,_=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*(r.clientHeight/(r.clientHeight*d))+u,w=s(v,_,m,g,l,"close");i+=w,y.push(w)}else{f=e,m=((S=n[c+1]).getBoundingClientRect().x-r.getBoundingClientRect().x)*(r.clientWidth/(r.clientWidth*d))+u,g=(S.getBoundingClientRect().y-r.getBoundingClientRect().y)*(r.clientHeight/(r.clientHeight*d))+u,v=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*(r.clientWidth/(r.clientWidth*d))+u,_=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*(r.clientHeight/(r.clientHeight*d))+u,w=s(v,_,m,g,a,"other");i+=w,y.push(w)}}),c?y.forEach((t,n)=>{f[e].children[n].setAttributeNS(null,"d",t)}):f[e].children[0].setAttributeNS(null,"d",i)}}));const y=o.querySelectorAll("."+e);Object.keys(y).map((function(e,n){if(null===y[e].querySelector(".point")){var d=o.querySelector("#"+t),f=y[e].classList[2].replace("node_out_",""),m=o.querySelector("#"+f).querySelectorAll("."+y[e].classList[3])[0],g=m.offsetWidth/2+(m.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,v=m.offsetHeight/2+(m.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,_=(d=d.querySelectorAll("."+y[e].classList[4])[0]).offsetWidth/2+(d.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,w=d.offsetHeight/2+(d.getBoundingClientRect().y-r.getBoundingClientRect().y)*h;const n=s(g,v,_,w,i,"openclose");y[e].children[0].setAttributeNS(null,"d",n)}else{const n=y[e].querySelectorAll(".point");let i="";const d=[];n.forEach((e,c)=>{if(0===c&&n.length-1==0){var f=o.querySelector("#"+t),y=((b=e).getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,m=(b.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,g=(x=f.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(x.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,v=x.offsetHeight/2+(x.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,_=s(y,m,g,v,l,"close");i+=_,d.push(_);f=e;var w=e.parentElement.classList[2].replace("node_out_",""),b=(E=o.querySelector("#"+w)).querySelectorAll("."+e.parentElement.classList[3])[0];y=(S=E.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(S.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,m=S.offsetHeight/2+(S.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,g=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,v=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,_=s(y,m,g,v,l,"open");i+=_,d.push(_)}else if(0===c){var S;f=e,w=e.parentElement.classList[2].replace("node_out_",""),b=(E=o.querySelector("#"+w)).querySelectorAll("."+e.parentElement.classList[3])[0],y=(S=E.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(S.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,m=S.offsetHeight/2+(S.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,g=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,v=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,_=s(y,m,g,v,l,"open");i+=_,d.push(_);f=e,g=((b=n[c+1]).getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,v=(b.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,y=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,m=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,_=s(y,m,g,v,a,"other");i+=_,d.push(_)}else if(c===n.length-1){var E,x;f=e,w=e.parentElement.classList[1].replace("node_in_",""),b=(E=o.querySelector("#"+w)).querySelectorAll("."+e.parentElement.classList[4])[0],g=(x=E.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(x.getBoundingClientRect().x-r.getBoundingClientRect().x)*p,v=x.offsetHeight/2+(x.getBoundingClientRect().y-r.getBoundingClientRect().y)*h,y=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,m=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,_=s(y,m,g,v,l,"close");i+=_,d.push(_)}else{f=e,g=((b=n[c+1]).getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,v=(b.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,y=(f.getBoundingClientRect().x-r.getBoundingClientRect().x)*p+u,m=(f.getBoundingClientRect().y-r.getBoundingClientRect().y)*h+u,_=s(y,m,g,v,a,"other");i+=_,d.push(_)}}),c?d.forEach((t,n)=>{y[e].children[n].setAttributeNS(null,"d",t)}):y[e].children[0].setAttributeNS(null,"d",i)}}))}dblclick(t){null!=this.connection_selected&&this.reroute&&this.createReroutePoint(this.connection_selected),"point"===t.target.classList[0]&&this.removeReroutePoint(t.target)}createReroutePoint(t){this.connection_selected.classList.remove("selected");const e=this.connection_selected.parentElement.classList[2].slice(9),n=this.connection_selected.parentElement.classList[1].slice(13),o=this.connection_selected.parentElement.classList[3],r=this.connection_selected.parentElement.classList[4];this.connection_selected=null;const i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.classList.add("point");var s=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),a=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));i.setAttributeNS(null,"cx",s),i.setAttributeNS(null,"cy",a),i.setAttributeNS(null,"r",this.reroute_width);let l=0;if(this.reroute_fix_curvature){const e=t.parentElement.querySelectorAll(".main-path").length;var c=document.createElementNS("http://www.w3.org/2000/svg","path");if(c.classList.add("main-path"),c.setAttributeNS(null,"d",""),t.parentElement.insertBefore(c,t.parentElement.children[e]),1===e)t.parentElement.appendChild(i);else{const n=Array.from(t.parentElement.children).indexOf(t);l=n,t.parentElement.insertBefore(i,t.parentElement.children[n+e+1])}}else t.parentElement.appendChild(i);const u=e.slice(5),d=this.drawflow.drawflow[this.module].data[u].outputs[o].connections.findIndex((function(t,e){return t.node===n&&t.output===r}));void 0===this.drawflow.drawflow[this.module].data[u].outputs[o].connections[d].points&&(this.drawflow.drawflow[this.module].data[u].outputs[o].connections[d].points=[]),this.reroute_fix_curvature?(l>0||this.drawflow.drawflow[this.module].data[u].outputs[o].connections[d].points!==[]?this.drawflow.drawflow[this.module].data[u].outputs[o].connections[d].points.splice(l,0,{pos_x:s,pos_y:a}):this.drawflow.drawflow[this.module].data[u].outputs[o].connections[d].points.push({pos_x:s,pos_y:a}),t.parentElement.querySelectorAll(".main-path").forEach((t,e)=>{t.classList.remove("selected")})):this.drawflow.drawflow[this.module].data[u].outputs[o].connections[d].points.push({pos_x:s,pos_y:a}),this.dispatch("addReroute",u),this.updateConnectionNodes(e)}removeReroutePoint(t){const e=t.parentElement.classList[2].slice(9),n=t.parentElement.classList[1].slice(13),o=t.parentElement.classList[3],r=t.parentElement.classList[4];let i=Array.from(t.parentElement.children).indexOf(t);const s=e.slice(5),a=this.drawflow.drawflow[this.module].data[s].outputs[o].connections.findIndex((function(t,e){return t.node===n&&t.output===r}));if(this.reroute_fix_curvature){const e=t.parentElement.querySelectorAll(".main-path").length;t.parentElement.children[e-1].remove(),i-=e,i<0&&(i=0)}else i--;this.drawflow.drawflow[this.module].data[s].outputs[o].connections[a].points.splice(i,1),t.remove(),this.dispatch("removeReroute",s),this.updateConnectionNodes(e)}registerNode(t,e,n=null,o=null){this.noderegister[t]={html:e,props:n,options:o}}getNodeFromId(t){var e=this.getModuleFromNodeId(t);return JSON.parse(JSON.stringify(this.drawflow.drawflow[e].data[t]))}getNodesFromName(t){var e=[];const n=this.drawflow.drawflow;return Object.keys(n).map((function(o,r){for(var i in n[o].data)n[o].data[i].name==t&&e.push(n[o].data[i].id)})),e}onSuccess_addNode(t,e){var n=t.node_id,o=t.num_in,r=t.num_out,i=t.input_tooltips,s=t.output_tooltips,a=t.typenode,l=t.html,c=t.classoverride,u=t.other_data,d=t.pos.x,p=t.pos.y;const h=document.createElement("div");h.classList.add("parent-node");const f=document.createElement("div");f.innerHTML="",f.setAttribute("id","node-"+n),f.classList.add("drawflow-node"),""!=c&&f.classList.add(...c.split(" "));const y=document.createElement("div");y.classList.add("inputs");const m=document.createElement("div");m.classList.add("outputs");const g={};for(var v=0;v<o;v++){const t=document.createElement("div");if(t.classList.add("input"),t.classList.add("input_"+(v+1)),g["input_"+(v+1)]={connections:[]},i.hasOwnProperty(v+1)){const e=document.createElement("span");e.classList.add("tooltip"),e.classList.add("input-tooltip"),e.innerHTML=i[v+1].name+" ";const n=document.createElement("span");n.classList.add("type"),n.innerHTML=i[v+1].type,e.appendChild(n),t.appendChild(e)}y.appendChild(t)}const _={};for(v=0;v<r;v++){const t=document.createElement("div");if(t.classList.add("output"),t.classList.add("output_"+(v+1)),_["output_"+(v+1)]={connections:[]},s.hasOwnProperty(v+1)){const e=document.createElement("span");e.classList.add("tooltip"),e.classList.add("output-tooltip"),e.innerHTML=s[v+1].name+" ";const n=document.createElement("span");n.classList.add("type"),n.innerHTML=s[v+1].type,e.appendChild(n),t.appendChild(e)}m.appendChild(t)}const w=document.createElement("div");if(w.classList.add("drawflow_content_node"),!1===a)w.innerHTML=l;else if(!0===a)w.appendChild(e.noderegister[l].html.cloneNode(!0));else if(3===parseInt(e.render.version)){let t=e.render.h(e.noderegister[l].html,e.noderegister[l].props,e.noderegister[l].options);t.appContext=e.parent,e.render.render(t,w)}else{let t=new e.render({parent:e.parent,render:t=>t(e.noderegister[l].html,{props:e.noderegister[l].props}),...e.noderegister[l].options}).$mount();w.appendChild(t.$el)}Object.entries(u).forEach((function(t,e){if("object"==typeof t[1])!function t(e,n,o){if(null===e)e=u[n];else e=e[n];null!==e&&Object.entries(e).forEach((function(n,r){if("object"==typeof n[1])t(e,n[0],o+"-"+n[0]);else for(var i=w.querySelectorAll("[df-"+o+"-"+n[0]+"]"),s=0;s<i.length;s++)i[s].value=n[1],i[s].isContentEditable&&(i[s].innerText=n[1])}))}(null,t[0],t[0]);else for(var n=w.querySelectorAll("[df-"+t[0]+"]"),o=0;o<n.length;o++)n[o].value=t[1],n[o].isContentEditable&&(n[o].innerText=t[1])})),f.appendChild(y),f.appendChild(w),f.appendChild(m),f.style.top=p+"px",f.style.left=d+"px",h.appendChild(f),e.precanvas.appendChild(h);var b={id:n,name:name,data:u,class:c,html:l,typenode:a,inputs:g,outputs:_,pos_x:d,pos_y:p};return e.drawflow.drawflow[e.module].data[n]=b,e.dispatch("nodeCreated",n),n}addNode(t,e,n){this.requestOperation("addNode",{name:t,ele_pos_x:e,ele_pos_y:n})}addNodeImport(t,e){const n=document.createElement("div");n.classList.add("parent-node");const o=document.createElement("div");o.innerHTML="",o.setAttribute("id","node-"+t.id),o.classList.add("drawflow-node"),""!=t.class&&o.classList.add(...t.class.split(" "));const r=document.createElement("div");r.classList.add("inputs");const i=document.createElement("div");i.classList.add("outputs"),Object.keys(t.inputs).map((function(n,o){const i=document.createElement("div");i.classList.add("input"),i.classList.add(n),r.appendChild(i),Object.keys(t.inputs[n].connections).map((function(o,r){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path");s.classList.add("main-path"),s.setAttributeNS(null,"d",""),i.classList.add("connection"),i.classList.add("node_in_node-"+t.id),i.classList.add("node_out_node-"+t.inputs[n].connections[o].node),i.classList.add(t.inputs[n].connections[o].input),i.classList.add(n),i.appendChild(s),e.appendChild(i)}))}));for(var s=0;s<Object.keys(t.outputs).length;s++){const t=document.createElement("div");t.classList.add("output"),t.classList.add("output_"+(s+1)),i.appendChild(t)}const a=document.createElement("div");if(a.classList.add("drawflow_content_node"),!1===t.typenode)a.innerHTML=t.html;else if(!0===t.typenode)a.appendChild(this.noderegister[t.html].html.cloneNode(!0));else if(3===parseInt(this.render.version)){let e=this.render.h(this.noderegister[t.html].html,this.noderegister[t.html].props,this.noderegister[t.html].options);e.appContext=this.parent,this.render.render(e,a)}else{let e=new this.render({parent:this.parent,render:e=>e(this.noderegister[t.html].html,{props:this.noderegister[t.html].props}),...this.noderegister[t.html].options}).$mount();a.appendChild(e.$el)}Object.entries(t.data).forEach((function(e,n){if("object"==typeof e[1])!function e(n,o,r){if(null===n)n=t.data[o];else n=n[o];null!==n&&Object.entries(n).forEach((function(t,o){if("object"==typeof t[1])e(n,t[0],r+"-"+t[0]);else for(var i=a.querySelectorAll("[df-"+r+"-"+t[0]+"]"),s=0;s<i.length;s++)i[s].value=t[1],i[s].isContentEditable&&(i[s].innerText=t[1])}))}(null,e[0],e[0]);else for(var o=a.querySelectorAll("[df-"+e[0]+"]"),r=0;r<o.length;r++)o[r].value=e[1],o[r].isContentEditable&&(o[r].innerText=e[1])})),o.appendChild(r),o.appendChild(a),o.appendChild(i),o.style.top=t.pos_y+"px",o.style.left=t.pos_x+"px",n.appendChild(o),this.precanvas.appendChild(n)}addRerouteImport(t){const e=this.reroute_width,n=this.reroute_fix_curvature,o=this.container;Object.keys(t.outputs).map((function(r,i){Object.keys(t.outputs[r].connections).map((function(i,s){const a=t.outputs[r].connections[i].points;void 0!==a&&a.forEach((s,l)=>{const c=t.outputs[r].connections[i].node,u=t.outputs[r].connections[i].output,d=o.querySelector(".connection.node_in_node-"+c+".node_out_node-"+t.id+"."+r+"."+u);if(n&&0===l)for(var p=0;p<a.length;p++){var h=document.createElementNS("http://www.w3.org/2000/svg","path");h.classList.add("main-path"),h.setAttributeNS(null,"d",""),d.appendChild(h)}const f=document.createElementNS("http://www.w3.org/2000/svg","circle");f.classList.add("point");var y=s.pos_x,m=s.pos_y;f.setAttributeNS(null,"cx",y),f.setAttributeNS(null,"cy",m),f.setAttributeNS(null,"r",e),d.appendChild(f)})}))}))}updateNodeValue(t){for(var e=t.target.attributes,n=0;n<e.length;n++)if(e[n].nodeName.startsWith("df-")){for(var o=e[n].nodeName.slice(3).split("-"),r=this.drawflow.drawflow[this.module].data[t.target.closest(".drawflow_content_node").parentElement.id.slice(5)].data,i=0;i<o.length-1;i+=1)null==r[o[i]]&&(r[o[i]]={}),r=r[o[i]];r[o[o.length-1]]=t.target.value,t.target.isContentEditable&&(r[o[o.length-1]]=t.target.innerText),this.dispatch("nodeDataChanged",t.target.closest(".drawflow_content_node").parentElement.id.slice(5))}}updateNodeDataFromId(t,e){var n=this.getModuleFromNodeId(t);if(this.drawflow.drawflow[n].data[t].data=e,this.module===n){const n=this.container.querySelector("#node-"+t);Object.entries(e).forEach((function(t,o){if("object"==typeof t[1])!function t(o,r,i){if(null===o)o=e[r];else o=o[r];null!==o&&Object.entries(o).forEach((function(e,r){if("object"==typeof e[1])t(o,e[0],i+"-"+e[0]);else for(var s=n.querySelectorAll("[df-"+i+"-"+e[0]+"]"),a=0;a<s.length;a++)s[a].value=e[1],s[a].isContentEditable&&(s[a].innerText=e[1])}))}(null,t[0],t[0]);else for(var r=n.querySelectorAll("[df-"+t[0]+"]"),i=0;i<r.length;i++)r[i].value=t[1],r[i].isContentEditable&&(r[i].innerText=t[1])}))}}addNodeInput(t){var e=this.getModuleFromNodeId(t);const n=this.getNodeFromId(t),o=Object.keys(n.inputs).length;if(this.module===e){const e=document.createElement("div");e.classList.add("input"),e.classList.add("input_"+(o+1));this.container.querySelector("#node-"+t+" .inputs").appendChild(e),this.updateConnectionNodes("node-"+t)}this.drawflow.drawflow[e].data[t].inputs["input_"+(o+1)]={connections:[]}}addNodeOutput(t){var e=this.getModuleFromNodeId(t);const n=this.getNodeFromId(t),o=Object.keys(n.outputs).length;if(this.module===e){const e=document.createElement("div");e.classList.add("output"),e.classList.add("output_"+(o+1));this.container.querySelector("#node-"+t+" .outputs").appendChild(e),this.updateConnectionNodes("node-"+t)}this.drawflow.drawflow[e].data[t].outputs["output_"+(o+1)]={connections:[]}}removeNodeInput(t,e){var n=this.getModuleFromNodeId(t);const o=this.getNodeFromId(t);this.module===n&&this.container.querySelector("#node-"+t+" .inputs .input."+e).remove();const r=[];Object.keys(o.inputs[e].connections).map((function(n,i){const s=o.inputs[e].connections[i].node,a=o.inputs[e].connections[i].input;r.push({id_output:s,id:t,output_class:a,input_class:e})})),r.forEach((t,e)=>{this.removeSingleConnection(t.id_output,t.id,t.output_class,t.input_class)}),delete this.drawflow.drawflow[n].data[t].inputs[e];const i=[],s=this.drawflow.drawflow[n].data[t].inputs;Object.keys(s).map((function(t,e){i.push(s[t])})),this.drawflow.drawflow[n].data[t].inputs={};const a=e.slice(6);let l=[];if(i.forEach((e,o)=>{e.connections.forEach((t,e)=>{l.push(t)}),this.drawflow.drawflow[n].data[t].inputs["input_"+(o+1)]=e}),l=new Set(l.map(t=>JSON.stringify(t))),l=Array.from(l).map(t=>JSON.parse(t)),this.module===n){this.container.querySelectorAll("#node-"+t+" .inputs .input").forEach((t,e)=>{const n=t.classList[1].slice(6);parseInt(a)<parseInt(n)&&(t.classList.remove("input_"+n),t.classList.add("input_"+(n-1)))})}l.forEach((e,o)=>{this.drawflow.drawflow[n].data[e.node].outputs[e.input].connections.forEach((o,r)=>{if(o.node==t){const i=o.output.slice(6);if(parseInt(a)<parseInt(i)){if(this.module===n){const n=this.container.querySelector(".connection.node_in_node-"+t+".node_out_node-"+e.node+"."+e.input+".input_"+i);n.classList.remove("input_"+i),n.classList.add("input_"+(i-1))}o.points?this.drawflow.drawflow[n].data[e.node].outputs[e.input].connections[r]={node:o.node,output:"input_"+(i-1),points:o.points}:this.drawflow.drawflow[n].data[e.node].outputs[e.input].connections[r]={node:o.node,output:"input_"+(i-1)}}}})}),this.updateConnectionNodes("node-"+t)}removeNodeOutput(t,e){var n=this.getModuleFromNodeId(t);const o=this.getNodeFromId(t);this.module===n&&this.container.querySelector("#node-"+t+" .outputs .output."+e).remove();const r=[];Object.keys(o.outputs[e].connections).map((function(n,i){const s=o.outputs[e].connections[i].node,a=o.outputs[e].connections[i].output;r.push({id:t,id_input:s,output_class:e,input_class:a})})),r.forEach((t,e)=>{this.removeSingleConnection(t.id,t.id_input,t.output_class,t.input_class)}),delete this.drawflow.drawflow[n].data[t].outputs[e];const i=[],s=this.drawflow.drawflow[n].data[t].outputs;Object.keys(s).map((function(t,e){i.push(s[t])})),this.drawflow.drawflow[n].data[t].outputs={};const a=e.slice(7);let l=[];if(i.forEach((e,o)=>{e.connections.forEach((t,e)=>{l.push({node:t.node,output:t.output})}),this.drawflow.drawflow[n].data[t].outputs["output_"+(o+1)]=e}),l=new Set(l.map(t=>JSON.stringify(t))),l=Array.from(l).map(t=>JSON.parse(t)),this.module===n){this.container.querySelectorAll("#node-"+t+" .outputs .output").forEach((t,e)=>{const n=t.classList[1].slice(7);parseInt(a)<parseInt(n)&&(t.classList.remove("output_"+n),t.classList.add("output_"+(n-1)))})}l.forEach((e,o)=>{this.drawflow.drawflow[n].data[e.node].inputs[e.output].connections.forEach((o,r)=>{if(o.node==t){const i=o.input.slice(7);if(parseInt(a)<parseInt(i)){if(this.module===n){const n=this.container.querySelector(".connection.node_in_node-"+e.node+".node_out_node-"+t+".output_"+i+"."+e.output);n.classList.remove("output_"+i),n.classList.remove(e.output),n.classList.add("output_"+(i-1)),n.classList.add(e.output)}o.points?this.drawflow.drawflow[n].data[e.node].inputs[e.output].connections[r]={node:o.node,input:"output_"+(i-1),points:o.points}:this.drawflow.drawflow[n].data[e.node].inputs[e.output].connections[r]={node:o.node,input:"output_"+(i-1)}}}})}),this.updateConnectionNodes("node-"+t)}onSuccess_removeNodeId(t,e){var n=t.id;e.removeConnectionNodeId(n);var o=e.getModuleFromNodeId(n.slice(5));e.module===o&&e.container.querySelector("#"+n).remove(),delete e.drawflow.drawflow[o].data[n.slice(5)],e.dispatch("nodeRemoved",n.slice(5))}removeNodeId(t){this.requestOperation("removeNodeId",{id:t})}onSuccess_removeConnection(t,e){var n=document.getElementsByClassName(t.class_list)[0],o=n.classList;n.remove();var r=e.drawflow.drawflow[e.module].data[o[2].slice(14)].outputs[o[3]].connections.findIndex((function(t,e){return t.node===o[1].slice(13)&&t.output===o[4]}));e.drawflow.drawflow[e.module].data[o[2].slice(14)].outputs[o[3]].connections.splice(r,1);var i=e.drawflow.drawflow[e.module].data[o[1].slice(13)].inputs[o[4]].connections.findIndex((function(t,e){return t.node===o[2].slice(14)&&t.input===o[3]}));e.drawflow.drawflow[e.module].data[o[1].slice(13)].inputs[o[4]].connections.splice(i,1),e.dispatch("connectionRemoved",{output_id:o[2].slice(14),input_id:o[1].slice(13),output_class:o[3],input_class:o[4]})}removeConnection(){null!=this.connection_selected&&(this.requestOperation("removeConnection",{class_list:this.connection_selected.parentElement.classList.toString()}),this.connection_selected=null)}removeSingleConnection(t,e,n,o){var r=this.getModuleFromNodeId(t);if(r===this.getModuleFromNodeId(e)){if(this.drawflow.drawflow[r].data[t].outputs[n].connections.findIndex((function(t,n){return t.node==e&&t.output===o}))>-1){this.module===r&&this.container.querySelector(".connection.node_in_node-"+e+".node_out_node-"+t+"."+n+"."+o).remove();var i=this.drawflow.drawflow[r].data[t].outputs[n].connections.findIndex((function(t,n){return t.node==e&&t.output===o}));this.drawflow.drawflow[r].data[t].outputs[n].connections.splice(i,1);var s=this.drawflow.drawflow[r].data[e].inputs[o].connections.findIndex((function(e,o){return e.node==t&&e.input===n}));return this.drawflow.drawflow[r].data[e].inputs[o].connections.splice(s,1),this.dispatch("connectionRemoved",{output_id:t,input_id:e,output_class:n,input_class:o}),!0}return!1}return!1}removeConnectionNodeId(t){const e="node_in_"+t,n="node_out_"+t,o=this.container.querySelectorAll("."+n);for(var r=o.length-1;r>=0;r--){var i=o[r].classList,s=this.drawflow.drawflow[this.module].data[i[1].slice(13)].inputs[i[4]].connections.findIndex((function(t,e){return t.node===i[2].slice(14)&&t.input===i[3]}));this.drawflow.drawflow[this.module].data[i[1].slice(13)].inputs[i[4]].connections.splice(s,1);var a=this.drawflow.drawflow[this.module].data[i[2].slice(14)].outputs[i[3]].connections.findIndex((function(t,e){return t.node===i[1].slice(13)&&t.output===i[4]}));this.drawflow.drawflow[this.module].data[i[2].slice(14)].outputs[i[3]].connections.splice(a,1),o[r].remove(),this.dispatch("connectionRemoved",{output_id:i[2].slice(14),input_id:i[1].slice(13),output_class:i[3],input_class:i[4]})}const l=this.container.querySelectorAll("."+e);for(r=l.length-1;r>=0;r--){i=l[r].classList,a=this.drawflow.drawflow[this.module].data[i[2].slice(14)].outputs[i[3]].connections.findIndex((function(t,e){return t.node===i[1].slice(13)&&t.output===i[4]}));this.drawflow.drawflow[this.module].data[i[2].slice(14)].outputs[i[3]].connections.splice(a,1);s=this.drawflow.drawflow[this.module].data[i[1].slice(13)].inputs[i[4]].connections.findIndex((function(t,e){return t.node===i[2].slice(14)&&t.input===i[3]}));this.drawflow.drawflow[this.module].data[i[1].slice(13)].inputs[i[4]].connections.splice(s,1),l[r].remove(),this.dispatch("connectionRemoved",{output_id:i[2].slice(14),input_id:i[1].slice(13),output_class:i[3],input_class:i[4]})}}getModuleFromNodeId(t){var e;const n=this.drawflow.drawflow;return Object.keys(n).map((function(o,r){Object.keys(n[o].data).map((function(n,r){n==t&&(e=o)}))})),e}addModule(t){this.drawflow.drawflow[t]={data:{}},this.dispatch("moduleCreated",t)}changeModule(t){this.dispatch("moduleChanged",t),this.module=t,this.precanvas.innerHTML="",this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_y=0,this.mouse_x=0,this.mouse_y=0,this.zoom=1,this.zoom_last_value=1,this.precanvas.style.transform="",this.import(this.drawflow,!1)}removeModule(t){this.module===t&&this.changeModule("Home"),delete this.drawflow.drawflow[t],this.dispatch("moduleRemoved",t)}clearModuleSelected(){this.precanvas.innerHTML="",this.drawflow.drawflow[this.module]={data:{}}}clear(){this.precanvas.innerHTML="",this.drawflow={drawflow:{Home:{data:{}}}}}export(){const t=JSON.parse(JSON.stringify(this.drawflow));return this.dispatch("export",t),t}import(t,e=!0){this.clear(),this.drawflow=JSON.parse(JSON.stringify(t)),this.load(),e&&this.dispatch("import","import")}on(t,e){return"function"!=typeof e?(console.error("The listener callback must be a function, the given type is "+typeof e),!1):"string"!=typeof t?(console.error("The event name must be a string, the given type is "+typeof t),!1):(void 0===this.events[t]&&(this.events[t]={listeners:[]}),void this.events[t].listeners.push(e))}removeListener(t,e){if(!this.events[t])return!1;const n=this.events[t].listeners,o=n.indexOf(e);o>-1&&n.splice(o,1)}dispatch(t,e){if(void 0===this.events[t])return!1;this.events[t].listeners.forEach(t=>{t(e)})}getUuid(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}onSuccess_requestOperation(t,e){switch(console.log(t),t.operation){case"addNode":e.onSuccess_addNode(t,e);break;case"removeNodeId":e.onSuccess_removeNodeId(t,e);break;case"addConnection":e.onSuccess_addConnection(t,e);break;case"removeConnection":e.onSuccess_removeConnection(t,e);break;case"refresh":e.onSuccess_refresh(t,e);break;case"run":e.onSuccess_run(t,e);break;case"setParameter":e.onSuccess_setParameter(t,e);break;case"save":e.onSuccess_save(t,e)}}requestOperation(t,e){e.file=file,o.post("/api/v1/"+t).send({payload:e}).set("X-API-Key","XXXXXXXXX").set("accept","json").end((t,e)=>{t?console.log(t):this.onSuccess_requestOperation(JSON.parse(e.text),this)})}onSuccess_refresh(t,e){document.getElementsByClassName("col")[0].innerHTML=t.html}refresh(){this.requestOperation("refresh",{})}onSuccess_run(t,e){console.log(t),document.getElementById("run").classList.remove("fa-fade")}run(){this.requestOperation("run",{}),document.getElementById("run").classList.remove("fa-fade")}onSuccess_setParameter(t,e){var n=document.getElementsByClassName("node-name-"+t.node)[0].parentElement.parentElement.getElementsByClassName("red-iconcolor")[0];n.classList.remove("red-iconcolor"),n.classList.add("green-iconcolor");var o=document.getElementById("node-"+t.node).getElementsByClassName("tooltip")[0];o.innerHTML=t.name+" ";const r=document.createElement("span");r.classList.add("type"),r.innerHTML=t.type,o.appendChild(r),document.getElementById("refresh").classList.remove("fa-spin")}setParameter(t){document.getElementById("refresh").classList.add("fa-spin"),this.requestOperation("setParameter",{node:t,name:document.getElementsByClassName("node-name-"+t)[0].value,type:document.getElementsByClassName("node-type-"+t)[0].value})}onSuccess_save(t,e){console.log(t,e)}save(){this.requestOperation("save",{})}}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var s;"undefined"!=typeof window?s=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),s=void 0):s=self;var a=n(7),l=n(8),c=n(9),u=n(21),d=n(3),p=d.isObject,h=d.mixin,f=d.hasOwn,y=n(24),m=n(25);function g(){}t.exports=function(t,n){return"function"==typeof n?new e.Request("GET",t).end(n):1===arguments.length?new e.Request("GET",t):new e.Request(t,n)};var v=e=t.exports;e.Request=C,v.getXHR=function(){if(s.XMLHttpRequest&&(!s.location||"file:"!==s.location.protocol))return new XMLHttpRequest;throw new Error("Browser-only version of superagent could not find XHR")};var _="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function w(t){if(!p(t))return t;var e=[];for(var n in t)f(t,n)&&b(e,n,t[n]);return e.join("&")}function b(t,e,n){if(void 0!==n)if(null!==n)if(Array.isArray(n)){var o,i=r(n);try{for(i.s();!(o=i.n()).done;){b(t,e,o.value)}}catch(t){i.e(t)}finally{i.f()}}else if(p(n))for(var s in n)f(n,s)&&b(t,"".concat(e,"[").concat(s,"]"),n[s]);else t.push(encodeURI(e)+"="+encodeURIComponent(n));else t.push(encodeURI(e))}function S(t){for(var e,n,o={},r=t.split("&"),i=0,s=r.length;i<s;++i)-1===(n=(e=r[i]).indexOf("="))?o[decodeURIComponent(e)]="":o[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return o}function E(t){return/[/+]json($|[^-\w])/i.test(t)}function x(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=function(t){for(var e,n,o,r,i=t.split(/\r?\n/),s={},a=0,l=i.length;a<l;++a)-1!==(e=(n=i[a]).indexOf(":"))&&(o=n.slice(0,e).toLowerCase(),r=_(n.slice(e+1)),s[o]=r);return s}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function C(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",(function(){var t,e=null,o=null;try{o=new x(n)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,n.xhr?(e.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,e.status=n.xhr.status?n.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),n.callback(e)}n.emit("response",o);try{n._isResponseOK(o)||(t=new Error(o.statusText||o.text||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=o,t.status=t.status||o.status,n.callback(t,o)):n.callback(null,o)}))}v.serializeObject=w,v.parseString=S,v.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":c.stringify,"application/json":l},v.parse={"application/x-www-form-urlencoded":S,"application/json":JSON.parse},h(x.prototype,y.prototype),x.prototype._parseBody=function(t){var e=v.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&E(this.type)&&(e=v.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)},x.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,o="cannot ".concat(e," ").concat(n," (").concat(this.status,")"),r=new Error(o);return r.status=this.status,r.method=e,r.url=n,r},v.Response=x,a(C.prototype),h(C.prototype,u.prototype),C.prototype.type=function(t){return this.set("Content-Type",v.types[t]||t),this},C.prototype.accept=function(t){return this.set("Accept",v.types[t]||t),this},C.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"===o(e)&&null!==e&&(n=e,e=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var r=n.encoder?n.encoder:function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(t,e,n,r)},C.prototype.query=function(t){return"string"!=typeof t&&(t=w(t)),t&&this._query.push(t),this},C.prototype.attach=function(t,e,n){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},C.prototype._getFormData=function(){return this._formData||(this._formData=new s.FormData),this._formData},C.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},C.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},C.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},C.prototype.ca=C.prototype.agent,C.prototype.buffer=C.prototype.ca,C.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},C.prototype.pipe=C.prototype.write,C.prototype._isHost=function(t){return t&&"object"===o(t)&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},C.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||g,this._finalizeQueryString(),this._end()},C.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},C.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var t=this;this.xhr=v.getXHR();var e=this.xhr,n=this._formData||this._data;this._setTimeouts(),e.addEventListener("readystatechange",(function(){var n=e.readyState;if(n>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4===n){var o;try{o=e.status}catch(t){o=0}if(!o){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}}));var o=function(e,n){n.total>0&&(n.percent=n.loaded/n.total*100,100===n.percent&&clearTimeout(t._uploadTimeoutTimer)),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{e.addEventListener("progress",o.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",o.bind(null,"upload"))}catch(t){}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof n&&!this._isHost(n)){var r=this._header["content-type"],i=this._serializer||v.serialize[r?r.split(";")[0]:""];!i&&E(r)&&(i=v.serialize["application/json"]),i&&(n=i(n))}for(var s in this.header)null!==this.header[s]&&f(this.header,s)&&e.setRequestHeader(s,this.header[s]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===n?null:n)},v.agent=function(){return new m};for(var A=function(){var t=R[O];m.prototype[t.toLowerCase()]=function(e,n){var o=new v.Request(t,e);return this._setDefaults(o),n&&o.end(n),o}},O=0,R=["GET","POST","OPTIONS","PATCH","PUT","DELETE"];O<R.length;O++)A();function L(t,e,n){var o=v("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&o.send(e),n&&o.end(n),o}m.prototype.del=m.prototype.delete,v.get=function(t,e,n){var o=v("GET",t);return"function"==typeof e&&(n=e,e=null),e&&o.query(e),n&&o.end(n),o},v.head=function(t,e,n){var o=v("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&o.query(e),n&&o.end(n),o},v.options=function(t,e,n){var o=v("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&o.send(e),n&&o.end(n),o},v.del=L,v.delete=L,v.patch=function(t,e,n){var o=v("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&o.send(e),n&&o.end(n),o},v.post=function(t,e,n){var o=v("POST",t);return"function"==typeof e&&(n=e,e=null),e&&o.send(e),n&&o.end(n),o},v.put=function(t,e,n){var o=v("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&o.send(e),n&&o.end(n),o}},function(t,e,n){function o(t){if(t)return function(t){for(var e in o.prototype)t[e]=o.prototype[e];return t}(t)}t.exports=o,o.prototype.on=o.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},o.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+t];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<o.length;r++)if((n=o[r])===e||n.fn===e){o.splice(r,1);break}return 0===o.length&&delete this._callbacks["$"+t],this},o.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(n){o=0;for(var r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,e)}return this},o.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},o.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=i,i.default=i,i.stable=l,i.stableStringify=l;var n=[],o=[];function r(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function i(t,e,i,a){var l;void 0===a&&(a=r()),function t(e,n,o,r,i,a,l){var c;if(a+=1,"object"==typeof e&&null!==e){for(c=0;c<r.length;c++)if(r[c]===e)return void s("[Circular]",e,n,i);if(void 0!==l.depthLimit&&a>l.depthLimit)return void s("[...]",e,n,i);if(void 0!==l.edgesLimit&&o+1>l.edgesLimit)return void s("[...]",e,n,i);if(r.push(e),Array.isArray(e))for(c=0;c<e.length;c++)t(e[c],c,c,r,e,a,l);else{var u=Object.keys(e);for(c=0;c<u.length;c++){var d=u[c];t(e[d],d,c,r,e,a,l)}}r.pop()}}(t,"",0,[],void 0,0,a);try{l=0===o.length?JSON.stringify(t,e,i):JSON.stringify(t,c(e),i)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var u=n.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return l}function s(t,e,r,i){var s=Object.getOwnPropertyDescriptor(i,r);void 0!==s.get?s.configurable?(Object.defineProperty(i,r,{value:t}),n.push([i,r,e,s])):o.push([e,r,t]):(i[r]=t,n.push([i,r,e]))}function a(t,e){return t<e?-1:t>e?1:0}function l(t,e,i,l){void 0===l&&(l=r());var u,d=function t(e,o,r,i,l,c,u){var d;if(c+=1,"object"==typeof e&&null!==e){for(d=0;d<i.length;d++)if(i[d]===e)return void s("[Circular]",e,o,l);try{if("function"==typeof e.toJSON)return}catch(t){return}if(void 0!==u.depthLimit&&c>u.depthLimit)return void s("[...]",e,o,l);if(void 0!==u.edgesLimit&&r+1>u.edgesLimit)return void s("[...]",e,o,l);if(i.push(e),Array.isArray(e))for(d=0;d<e.length;d++)t(e[d],d,d,i,e,c,u);else{var p={},h=Object.keys(e).sort(a);for(d=0;d<h.length;d++){var f=h[d];t(e[f],f,d,i,e,c,u),p[f]=e[f]}if(void 0===l)return p;n.push([l,o,e]),l[o]=p}i.pop()}}(t,"",0,[],void 0,0,l)||t;try{u=0===o.length?JSON.stringify(d,e,i):JSON.stringify(d,c(e),i)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var p=n.pop();4===p.length?Object.defineProperty(p[0],p[1],p[3]):p[0][p[1]]=p[2]}}return u}function c(t){return t=void 0!==t?t:function(t,e){return e},function(e,n){if(o.length>0)for(var r=0;r<o.length;r++){var i=o[r];if(i[1]===e&&i[0]===n){n=i[2],o.splice(r,1);break}}return t.call(this,e,n)}}},function(t,e,n){"use strict";var o=n(10),r=n(20),i=n(2);t.exports={formats:i,parse:r,stringify:o}},function(t,e,n){"use strict";var o=n(11),r=n(4),i=n(2),s=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},l=Array.isArray,c=String.prototype.split,u=Array.prototype.push,d=function(t,e){u.apply(t,l(e)?e:[e])},p=Date.prototype.toISOString,h=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:h,formatter:i.formatters[h],indices:!1,serializeDate:function(t){return p.call(t)},skipNulls:!1,strictNullHandling:!1},y={},m=function t(e,n,i,s,a,u,p,h,m,g,v,_,w,b,S){for(var E,x=e,C=S,A=0,O=!1;void 0!==(C=C.get(y))&&!O;){var R=C.get(e);if(A+=1,void 0!==R){if(R===A)throw new RangeError("Cyclic object value");O=!0}void 0===C.get(y)&&(A=0)}if("function"==typeof p?x=p(n,x):x instanceof Date?x=g(x):"comma"===i&&l(x)&&(x=r.maybeMap(x,(function(t){return t instanceof Date?g(t):t}))),null===x){if(s)return u&&!w?u(n,f.encoder,b,"key",v):n;x=""}if("string"==typeof(E=x)||"number"==typeof E||"boolean"==typeof E||"symbol"==typeof E||"bigint"==typeof E||r.isBuffer(x)){if(u){var L=w?n:u(n,f.encoder,b,"key",v);if("comma"===i&&w){for(var j=c.call(String(x),","),N="",T=0;T<j.length;++T)N+=(0===T?"":",")+_(u(j[T],f.encoder,b,"value",v));return[_(L)+"="+N]}return[_(L)+"="+_(u(x,f.encoder,b,"value",v))]}return[_(n)+"="+_(String(x))]}var B,k=[];if(void 0===x)return k;if("comma"===i&&l(x))B=[{value:x.length>0?x.join(",")||null:void 0}];else if(l(p))B=p;else{var P=Object.keys(x);B=h?P.sort(h):P}for(var I=0;I<B.length;++I){var q=B[I],M="object"==typeof q&&void 0!==q.value?q.value:x[q];if(!a||null!==M){var H=l(x)?"function"==typeof i?i(n,q):n:n+(m?"."+q:"["+q+"]");S.set(e,A);var z=o();z.set(y,S),d(k,t(M,H,i,s,a,u,p,h,m,g,v,_,w,b,z))}}return k};t.exports=function(t,e){var n,r=t,c=function(t){if(!t)return f;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||f.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==t.format){if(!s.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var o=i.formatters[n],r=f.filter;return("function"==typeof t.filter||l(t.filter))&&(r=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===t.allowDots?f.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:f.charsetSentinel,delimiter:void 0===t.delimiter?f.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:f.encode,encoder:"function"==typeof t.encoder?t.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:f.encodeValuesOnly,filter:r,format:n,formatter:o,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:f.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:f.strictNullHandling}}(e);"function"==typeof c.filter?r=(0,c.filter)("",r):l(c.filter)&&(n=c.filter);var u,p=[];if("object"!=typeof r||null===r)return"";u=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var h=a[u];n||(n=Object.keys(r)),c.sort&&n.sort(c.sort);for(var y=o(),g=0;g<n.length;++g){var v=n[g];c.skipNulls&&null===r[v]||d(p,m(r[v],v,h,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,y))}var _=p.join(c.delimiter),w=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),_.length>0?w+_:""}},function(t,e,n){"use strict";var o=n(0),r=n(16),i=n(18),s=o("%TypeError%"),a=o("%WeakMap%",!0),l=o("%Map%",!0),c=r("WeakMap.prototype.get",!0),u=r("WeakMap.prototype.set",!0),d=r("WeakMap.prototype.has",!0),p=r("Map.prototype.get",!0),h=r("Map.prototype.set",!0),f=r("Map.prototype.has",!0),y=function(t,e){for(var n,o=t;null!==(n=o.next);o=n)if(n.key===e)return o.next=n.next,n.next=t.next,t.next=n,n};t.exports=function(){var t,e,n,o={assert:function(t){if(!o.has(t))throw new s("Side channel does not contain "+i(t))},get:function(o){if(a&&o&&("object"==typeof o||"function"==typeof o)){if(t)return c(t,o)}else if(l){if(e)return p(e,o)}else if(n)return function(t,e){var n=y(t,e);return n&&n.value}(n,o)},has:function(o){if(a&&o&&("object"==typeof o||"function"==typeof o)){if(t)return d(t,o)}else if(l){if(e)return f(e,o)}else if(n)return function(t,e){return!!y(t,e)}(n,o);return!1},set:function(o,r){a&&o&&("object"==typeof o||"function"==typeof o)?(t||(t=new a),u(t,o,r)):l?(e||(e=new l),h(e,o,r)):(n||(n={key:{},next:null}),function(t,e,n){var o=y(t,e);o?o.value=n:t.next={key:e,next:t.next,value:n}}(n,o,r))}};return o}},function(t,e,n){"use strict";var o="undefined"!=typeof Symbol&&Symbol,r=n(13);t.exports=function(){return"function"==typeof o&&("function"==typeof Symbol&&("symbol"==typeof o("foo")&&("symbol"==typeof Symbol("bar")&&r())))}},function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},function(t,e,n){"use strict";var o="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError(o+e);for(var n,s=r.call(arguments,1),a=function(){if(this instanceof n){var o=e.apply(this,s.concat(r.call(arguments)));return Object(o)===o?o:this}return e.apply(t,s.concat(r.call(arguments)))},l=Math.max(0,e.length-s.length),c=[],u=0;u<l;u++)c.push("$"+u);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var d=function(){};d.prototype=e.prototype,n.prototype=new d,d.prototype=null}return n}},function(t,e,n){"use strict";var o=n(1);t.exports=o.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var o=n(0),r=n(17),i=r(o("String.prototype.indexOf"));t.exports=function(t,e){var n=o(t,!!e);return"function"==typeof n&&i(t,".prototype.")>-1?r(n):n}},function(t,e,n){"use strict";var o=n(1),r=n(0),i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||o.call(s,i),l=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(o,s,arguments);if(l&&c){var n=l(e,"length");n.configurable&&c(e,"length",{value:1+u(0,t.length-(arguments.length-1))})}return e};var d=function(){return a(o,i,arguments)};c?c(t.exports,"apply",{value:d}):t.exports.apply=d},function(t,e,n){var o="function"==typeof Map&&Map.prototype,r=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=o&&r&&"function"==typeof r.get?r.get:null,s=o&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&l&&"function"==typeof l.get?l.get:null,u=a&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,y=Object.prototype.toString,m=Function.prototype.toString,g=String.prototype.match,v=String.prototype.slice,_=String.prototype.replace,w=String.prototype.toUpperCase,b=String.prototype.toLowerCase,S=RegExp.prototype.test,E=Array.prototype.concat,x=Array.prototype.join,C=Array.prototype.slice,A=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,R=Object.getOwnPropertySymbols,L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,j="function"==typeof Symbol&&"object"==typeof Symbol.iterator,N="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===j||"symbol")?Symbol.toStringTag:null,T=Object.prototype.propertyIsEnumerable,B=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function k(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||S.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var o=t<0?-A(-t):A(t);if(o!==t){var r=String(o),i=v.call(e,r.length+1);return _.call(r,n,"$&_")+"."+_.call(_.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(e,n,"$&_")}var P=n(19),I=P.custom,q=F(I)?I:null;function M(t,e,n){var o="double"===(n.quoteStyle||e)?'"':"'";return o+t+o}function H(t){return _.call(String(t),/"/g,"&quot;")}function z(t){return!("[object Array]"!==$(t)||N&&"object"==typeof t&&N in t)}function D(t){return!("[object RegExp]"!==$(t)||N&&"object"==typeof t&&N in t)}function F(t){if(j)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!L)return!1;try{return L.call(t),!0}catch(t){}return!1}t.exports=function t(e,n,o,r){var a=n||{};if(U(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(U(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!U(a,"customInspect")||a.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(U(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(U(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var y=a.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return function t(e,n){if(e.length>n.maxStringLength){var o=e.length-n.maxStringLength,r="... "+o+" more character"+(o>1?"s":"");return t(v.call(e,0,n.maxStringLength),n)+r}return M(_.call(_.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,J),"single",n)}(e,a);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var w=String(e);return y?k(e,w):w}if("bigint"==typeof e){var S=String(e)+"n";return y?k(e,S):S}var A=void 0===a.depth?5:a.depth;if(void 0===o&&(o=0),o>=A&&A>0&&"object"==typeof e)return z(e)?"[Array]":"[Object]";var R=function(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;n=x.call(Array(t.indent+1)," ")}return{base:n,prev:x.call(Array(e+1),n)}}(a,o);if(void 0===r)r=[];else if(X(r,e)>=0)return"[Circular]";function I(e,n,i){if(n&&(r=C.call(r)).push(n),i){var s={depth:a.depth};return U(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),t(e,s,o+1,r)}return t(e,a,o+1,r)}if("function"==typeof e&&!D(e)){var W=function(t){if(t.name)return t.name;var e=g.call(m.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),Z=K(e,I);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(Z.length>0?" { "+x.call(Z,", ")+" }":"")}if(F(e)){var tt=j?_.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):L.call(e);return"object"!=typeof e||j?tt:G(tt)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var et="<"+b.call(String(e.nodeName)),nt=e.attributes||[],ot=0;ot<nt.length;ot++)et+=" "+nt[ot].name+"="+M(H(nt[ot].value),"double",a);return et+=">",e.childNodes&&e.childNodes.length&&(et+="..."),et+="</"+b.call(String(e.nodeName))+">"}if(z(e)){if(0===e.length)return"[]";var rt=K(e,I);return R&&!function(t){for(var e=0;e<t.length;e++)if(X(t[e],"\n")>=0)return!1;return!0}(rt)?"["+Y(rt,R)+"]":"[ "+x.call(rt,", ")+" ]"}if(function(t){return!("[object Error]"!==$(t)||N&&"object"==typeof t&&N in t)}(e)){var it=K(e,I);return"cause"in Error.prototype||!("cause"in e)||T.call(e,"cause")?0===it.length?"["+String(e)+"]":"{ ["+String(e)+"] "+x.call(it,", ")+" }":"{ ["+String(e)+"] "+x.call(E.call("[cause]: "+I(e.cause),it),", ")+" }"}if("object"==typeof e&&l){if(q&&"function"==typeof e[q]&&P)return P(e,{depth:A-o});if("symbol"!==l&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{c.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var st=[];return s.call(e,(function(t,n){st.push(I(n,e,!0)+" => "+I(t,e))})),V("Map",i.call(e),st,R)}if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{c.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var at=[];return u.call(e,(function(t){at.push(I(t,e))})),V("Set",c.call(e),at,R)}if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{d.call(t,d);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Q("WeakMap");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{d.call(t,d)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Q("WeakSet");if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{return h.call(t),!0}catch(t){}return!1}(e))return Q("WeakRef");if(function(t){return!("[object Number]"!==$(t)||N&&"object"==typeof t&&N in t)}(e))return G(I(Number(e)));if(function(t){if(!t||"object"!=typeof t||!O)return!1;try{return O.call(t),!0}catch(t){}return!1}(e))return G(I(O.call(e)));if(function(t){return!("[object Boolean]"!==$(t)||N&&"object"==typeof t&&N in t)}(e))return G(f.call(e));if(function(t){return!("[object String]"!==$(t)||N&&"object"==typeof t&&N in t)}(e))return G(I(String(e)));if(!function(t){return!("[object Date]"!==$(t)||N&&"object"==typeof t&&N in t)}(e)&&!D(e)){var lt=K(e,I),ct=B?B(e)===Object.prototype:e instanceof Object||e.constructor===Object,ut=e instanceof Object?"":"null prototype",dt=!ct&&N&&Object(e)===e&&N in e?v.call($(e),8,-1):ut?"Object":"",pt=(ct||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(dt||ut?"["+x.call(E.call([],dt||[],ut||[]),": ")+"] ":"");return 0===lt.length?pt+"{}":R?pt+"{"+Y(lt,R)+"}":pt+"{ "+x.call(lt,", ")+" }"}return String(e)};var W=Object.prototype.hasOwnProperty||function(t){return t in this};function U(t,e){return W.call(t,e)}function $(t){return y.call(t)}function X(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}function J(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function G(t){return"Object("+t+")"}function Q(t){return t+" { ? }"}function V(t,e,n,o){return t+" ("+e+") {"+(o?Y(n,o):x.call(n,", "))+"}"}function Y(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+x.call(t,","+n)+"\n"+e.prev}function K(t,e){var n=z(t),o=[];if(n){o.length=t.length;for(var r=0;r<t.length;r++)o[r]=U(t,r)?e(t[r],t):""}var i,s="function"==typeof R?R(t):[];if(j){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var l in t)U(t,l)&&(n&&String(Number(l))===l&&l<t.length||j&&i["$"+l]instanceof Symbol||(S.call(/[^\w$]/,l)?o.push(e(l,t)+": "+e(t[l],t)):o.push(l+": "+e(t[l],t))));if("function"==typeof R)for(var c=0;c<s.length;c++)T.call(t,s[c])&&o.push("["+e(s[c])+"]: "+e(t[s[c]],t));return o}},function(t,e){},function(t,e,n){"use strict";var o=n(4),r=Object.prototype.hasOwnProperty,i=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:o.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},l=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},c=function(t,e,n,o){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(i),c=a?i.slice(0,a.index):i,u=[];if(c){if(!n.plainObjects&&r.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var d=0;n.depth>0&&null!==(a=s.exec(i))&&d<n.depth;){if(d+=1,!n.plainObjects&&r.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+i.slice(a.index)+"]"),function(t,e,n,o){for(var r=o?e:l(e,n),i=t.length-1;i>=0;--i){var s,a=t[i];if("[]"===a&&n.parseArrays)s=[].concat(r);else{s=n.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);n.parseArrays||""!==c?!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(s=[])[u]=r:"__proto__"!==c&&(s[c]=r):s={0:r}}r=s}return r}(u,e,n,o)}};t.exports=function(t,e){var n=function(t){if(!t)return s;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?s.charset:t.charset;return{allowDots:void 0===t.allowDots?s.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:s.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:s.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:s.comma,decoder:"function"==typeof t.decoder?t.decoder:s.decoder,delimiter:"string"==typeof t.delimiter||o.isRegExp(t.delimiter)?t.delimiter:s.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:s.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:s.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:s.strictNullHandling}}(e);if(""===t||null==t)return n.plainObjects?Object.create(null):{};for(var u="string"==typeof t?function(t,e){var n,c={},u=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,d=e.parameterLimit===1/0?void 0:e.parameterLimit,p=u.split(e.delimiter,d),h=-1,f=e.charset;if(e.charsetSentinel)for(n=0;n<p.length;++n)0===p[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[n]?f="utf-8":"utf8=%26%2310003%3B"===p[n]&&(f="iso-8859-1"),h=n,n=p.length);for(n=0;n<p.length;++n)if(n!==h){var y,m,g=p[n],v=g.indexOf("]="),_=-1===v?g.indexOf("="):v+1;-1===_?(y=e.decoder(g,s.decoder,f,"key"),m=e.strictNullHandling?null:""):(y=e.decoder(g.slice(0,_),s.decoder,f,"key"),m=o.maybeMap(l(g.slice(_+1),e),(function(t){return e.decoder(t,s.decoder,f,"value")}))),m&&e.interpretNumericEntities&&"iso-8859-1"===f&&(m=a(m)),g.indexOf("[]=")>-1&&(m=i(m)?[m]:m),r.call(c,y)?c[y]=o.combine(c[y],m):c[y]=m}return c}(t,n):t,d=n.plainObjects?Object.create(null):{},p=Object.keys(u),h=0;h<p.length;++h){var f=p[h],y=c(f,u[f],n,"string"==typeof t);d=o.merge(d,y,n)}return!0===n.allowSparse?d:o.compact(d)}},function(t,e,n){"use strict";(function(e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=n(23),i=n(3),s=i.isObject,a=i.hasOwn;function l(){}t.exports=l,l.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},l.prototype.parse=function(t){return this._parser=t,this},l.prototype.responseType=function(t){return this._responseType=t,this},l.prototype.serialize=function(t){return this._serializer=t,this},l.prototype.timeout=function(t){if(!t||"object"!==o(t))return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(a(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},l.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var c=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),u=new Set([408,413,429,500,502,503,504,521,522,524]);l.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(t){console.error(t)}if(e&&e.status&&u.has(e.status))return!0;if(t){if(t.code&&c.has(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},l.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},l.prototype.then=function(t,e){var n=this;if(!this._fullfilledPromise){var o=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(t,e){o.on("abort",(function(){if(!(n._maxRetries&&n._maxRetries>n._retries))if(n.timedout&&n.timedoutError)e(n.timedoutError);else{var t=new Error("Aborted");t.code="ABORTED",t.status=n.status,t.method=n.method,t.url=n.url,e(t)}})),o.end((function(n,o){n?e(n):t(o)}))}))}return this._fullfilledPromise.then(t,e)},l.prototype.catch=function(t){return this.then(void 0,t)},l.prototype.use=function(t){return t(this),this},l.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},l.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},l.prototype.get=function(t){return this._header[t.toLowerCase()]},l.prototype.getHeader=l.prototype.get,l.prototype.set=function(t,e){if(s(t)){for(var n in t)a(t,n)&&this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},l.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},l.prototype.field=function(t,e,n){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(s(t)){for(var o in t)a(t,o)&&this.field(o,t[o]);return this}if(Array.isArray(e)){for(var r in e)a(e,r)&&this.field(t,e[r]);return this}if(null==e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=String(e)),n?this._getFormData().append(t,e,n):this._getFormData().append(t,e),this},l.prototype.abort=function(){if(this._aborted)return this;if(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req){if(r.gte(e.version,"v13.0.0")&&r.lt(e.version,"v14.0.0"))throw new Error("Superagent does not work in v13 properly with abort() due to Node.js core changes");r.gte(e.version,"v14.0.0")&&(this.req.destroyed=!0),this.req.abort()}return this.clearTimeout(),this.emit("abort"),this},l.prototype._auth=function(t,e,n,o){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(o("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},l.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},l.prototype.redirects=function(t){return this._maxRedirects=t,this},l.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},l.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},l.prototype.send=function(t){var e=s(t),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&s(this._data))for(var o in t)a(t,o)&&(this._data[o]=t[o]);else"string"==typeof t?(n||this.type("form"),(n=this._header["content-type"])&&(n=n.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===n?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)||n||this.type("json"),this},l.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},l.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var n=this.url.slice(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.slice(0,e)+"?"+n.join("&")}}},l.prototype._appendQueryString=function(){console.warn("Unsupported")},l.prototype._timeoutError=function(t,e,n){if(!this._aborted){var o=new Error("".concat(t+e,"ms exceeded"));o.timeout=e,o.code="ECONNABORTED",o.errno=n,this.timedout=!0,this.timedoutError=o,this.abort(),this.callback(o)}},l.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}}).call(this,n(22))},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var t=a(p);u=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,u=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||u||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){},function(t,e,n){"use strict";var o=n(3);function r(){}t.exports=r,r.prototype.get=function(t){return this.header[t.toLowerCase()]},r.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=o.type(e);var n=o.params(e);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(this[r]=n[r]);this.links={};try{t.link&&(this.links=o.parseLinks(t.link))}catch(t){}},r.prototype._setStatusProperties=function(t){var e=Math.trunc(t/100);this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1===e,this.ok=2===e,this.redirect=3===e,this.clientError=4===e,this.serverError=5===e,this.error=(4===e||5===e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t}},function(t,e,n){"use strict";function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function s(){this._defaults=[]}for(var a=function(){var t=c[l];s.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return this._defaults.push({fn:t,args:n}),this}},l=0,c=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"];l<c.length;l++)a();s.prototype._setDefaults=function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(this._defaults);try{for(n.s();!(e=n.n()).done;){var i=e.value;t[i.fn].apply(t,o(i.args))}}catch(t){n.e(t)}finally{n.f()}},t.exports=s}]).default}));